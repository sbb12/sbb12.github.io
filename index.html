<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.8.8/brython.js"
            integrity="sha256-rA89wPrTJJQFWJaZveKW8jpdmC3t5F9rRkPyBjz8G04=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.8.8/brython_stdlib.js"
            integrity="sha256-Gnrw9tIjrsXcZSCh/wos5Jrpn0bNVNFJuNJI9d71TDs=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
            integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

        <link rel="stylesheet" href="index.css">

        <title>Brython</title>

    </head>

    <body onload="brython()">

        <h1 class="text-center p-3 bg-info text-white">Hello and welcome to my Brython website!</h1>
        <section class="alert-section p-3 bg-light">
            <div class="container">
                <h2 id="header2"></h2>

                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <button class="btn btn-primary" type="button" id="alert-btn">Alert and Insert</button>
                    </div>
                    <input type="text" class="form-control" placeholder="Type something then click the button"
                        id="to-alert-text" aria-label="Text to be alerted" aria-describedby="basic-addon2">
                </div>
                <p class="text-center" id="text_content"></p>
            </div>
        </section>


        <section class="name-section p-3 bg-light">
            <div class="container">
                <h2 id="greet-text">Hello {name}</h2>

            </div>
        </section>

        <section class="joke-section p-3 bg-light">
            <div class="container">

                <div class="card-deck">
                    <div class="card text-center" style="width: 18rem;">
                        <div class="card-body">
                            <h5 class="card-title">Jokes!</h5>
                            <p class="card-text" id="joke-text1">A Chuck Norris joke will be generated here using joke
                                api! <br> Go ahead and click the "Get Joke" button!
                            </p>
                            <button class="btn btn-outline-primary text-center" id="joke-btn1">Get Joke</button>

                        </div>
                    </div>

                    <div class="card" style="width: 18rem;">
                        <div class="card-body">
                            <h5 class="card-title text-center">Jokes!</h5>
                            <p class="card-text text-center" id="joke-text2">A Dad joke will be generated here using
                                joke api! <br> Go ahead and click the "Get Joke" button!
                            </p>
                            <div class="d-flex justify-content-center">
                                <button class="btn btn-outline-primary text-center" id="joke-btn2">Get Joke</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="file-upload-section p-3 bg-light">
            <div class="container">
                <form>
                    <div class="form-group">

                        <input type="file" class="form-control-file" id="file-upload">
                        <br>
                        <textarea name="" id="file-text" cols="30" rows="10" class="form-control" id="file-text"
                            placeholder="Upload a text file to view it here."></textarea>
                    </div>
                </form>

            </div>
        </section>

        <section class="rotate">
            <div class="container">
                <button id="rotate-btn">Rotate</button>
            </div>
        </section>


        <script type="text/python" id="script0">
            from browser import document, console, alert

            def show(e):
                var1 = document['to-alert-text'].value
                console.log(var1)
                alert(var1)
                document['header2'] <= var1
            
            document['alert-btn'].bind('click', show)
        </script>

        <!-- Text bind -->
        <script type="text/python" id="script1">
            from browser import document, console

            def show_text(e):
                document['text_content'].textContent = e.target.value
                console.log(e.target.value)
            
            document['to-alert-text'].bind('input', show_text)
        </script>

        <!-- Template and variable -->
        <script type="text/python" id="script2">
            from browser import document
            from browser.template import Template

            Template(document['greet-text']).render(name="Surge")
        </script>


        <!-- Ajax call -->
        <script type="text/python" id="script3">
            from browser import document, ajax, console
            import json

            url1 = "https://api.chucknorris.io/jokes/random"
            url2 = "https://icanhazdadjoke.com/slack"

            def on_complete1(req):
                data = json.loads(req.responseText)
                document['joke-text1'].text = data['value']
            
            def on_complete2(req):
                data = json.loads(req.responseText)
                joke = data["attachments"][0]["text"]
                document['joke-text2'].text = joke
                
            
            def get_joke1(e):
                req = ajax.ajax()
                req.open("GET", url1, True)
                req.bind("complete", on_complete1)
                document['joke-text1'].text = "Loading...."
                req.send()
            
            def get_joke2(e):
                req = ajax.ajax()
                req.open("GET", url2, True)
                req.bind("complete", on_complete2)
                document['joke-text2'].text = "Loading...."
                req.send()
            
            document["joke-btn1"].bind("click", get_joke1)
            document["joke-btn2"].bind("click", get_joke2)
        </script>

        <!-- File upload -->
        <script type="text/python" id="script4">
        from browser import document, window

        def file_read(e):
            def onload(e):
                document['file-text'].value = e.target.result

            file = document['file-upload'].files[0]
            reader = window.FileReader.new()
            reader.readAsText(file)
            reader.bind("load", onload)
        
        document['file-upload'].bind('input', file_read)


        
        </script>

        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
    </body>

</html>